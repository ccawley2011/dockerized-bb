From dfefba77520ded5c5fd4864e76352a5f3eb23e74 Mon Sep 17 00:00:00 2001
From: DRC <information@libjpeg-turbo.org>
Date: Thu, 22 Sep 2016 14:19:29 -0500
Subject: [PATCH] Fix broken build with NDK platforms < android-21

Regression introduced by a09ba29a55b9a43d346421210d94370065eeaf53

Fixes #103
---
 ChangeLog.md | 9 +++++++++
 jmemmgr.c    | 1 +
 2 files changed, 10 insertions(+)

diff --git a/ChangeLog.md b/ChangeLog.md
index 7f417a4..e2b9df3 100644
--- a/ChangeLog.md
+++ b/ChangeLog.md
@@ -1,3 +1,12 @@
+1.5.2
+=====
+
+### Significant changes relative to 1.5.1:
+
+1. Fixed a regression introduced by 1.5.1[7] that prevented libjpeg-turbo from
+building with Android NDK platforms prior to android-21 (5.0).
+
+
 1.5.1
 =====
 
diff --git a/jmemmgr.c b/jmemmgr.c
index adccbdf..b17c5c5 100644
--- a/jmemmgr.c
+++ b/jmemmgr.c
@@ -33,6 +33,7 @@
 #include "jpeglib.h"
 #include "jmemsys.h"            /* import the system-dependent declarations */
 #include <stdint.h>
+#include <limits.h>
 
 #ifndef NO_GETENV
 #ifndef HAVE_STDLIB_H           /* <stdlib.h> should declare getenv() */
-- 
2.20.1

